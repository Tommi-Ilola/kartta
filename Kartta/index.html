<!DOCTYPE html>
<html lang="fi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ratakilometri kartta</title>
    <link rel="icon" href="Logo.png">
	<link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
	
</head>

<body onload="verifyPassword();">
<div id="map" style="display:none"></div>	
  <div id="protected-content" style="display:none">

	

	<div id="menuContainer">
		<button id="menuButton">
			<img src="funnel.svg" alt="Suodatin" style="width: 25px; height: 25px;">
		</button>
		<div id="menuContent" style="display: none; font-family: calibri;">
			<label><input type="checkbox" id="tunnelitCheckbox"> Näytä tunnelit</label><br>
			<label><input type="checkbox" id="sillatCheckbox"> Näytä sillat</label><br>
			<label><input type="checkbox" id="tasoristeyksetCheckbox"> Näytä tasoristeykset</label><br>
			<label><input type="checkbox" id="tilirataosatCheckbox"> Näytä tilirataosat</label><br>
			<label><input type="checkbox" id="kilometrimerkitCheckbox" checked> Näytä kilometrimerkit</label><br>
			<label><input type="checkbox" id="kayttokeskusalueetCheckbox"> Näytä käyttökeskusalueet</label><br>
		</div>
	</div>

	<span>
	<button id="toggleView">
	<img src="maa.png" alt="Maapallo" style="
		width: auto;
		height: -webkit-fill-available;
	">
	</button>
	</span>

		<span>
		<button id="locateUser" class="locate-button">
		<img src="locate.png" alt="tähtäin" style="
			width: auto;
			height: -webkit-fill-available;
		">
		</button>
		</span>
		
	<div class="searchContainer">
		<div class="searchBox">
			<input type="text" id="searchInput" placeholder="Syötä ratakm...">
			<button id="searchButton" type="button">
				<span class="magnifier">&#x1F50E;&#xFE0E;</span>
				<span class="close-icon" style="display: none;">&#x2715;</span>
			</button>
		<div class="resultbox">
			<button type="button" class="collapsible"></button>
			<div class="content">
				<div class="results" id="results">...</div>
			</div>
		</div>
		
	</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    var coll = document.getElementsByClassName("collapsible");
    var resultsDiv = document.getElementById("results");
	resultsDiv.style.display = "none";

    function toggleCollapsibleVisibility() {
        // Tarkistetaan, onko results-div näkyvissä
        var isResultsVisible = resultsDiv.style.display !== "none";

        // Asetetaan collapsible-elementtien näkyvyys results-divin näkyvyyden mukaan
        for (var i = 0; i < coll.length; i++) {
            coll[i].style.display = isResultsVisible ? "block" : "none";
        }
    }

    for (var i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "none") {
                content.style.display = "block";
            } else {
                content.style.display = "none";
            }
        });
    }

    // Asetetaan alustava näkyvyys
    toggleCollapsibleVisibility();

    // Tarkistetaan ja asetetaan näkyvyys aina kun results-divin tila muuttuu
    var observer = new MutationObserver(toggleCollapsibleVisibility);
    observer.observe(resultsDiv, { attributes: true, childList: true, subtree: true });
});
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.7.5/proj4.js"></script>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="script.js"></script> 
<script src="https://github.com/bbecquet/Leaflet.RotatedMarker/blob/master/leaflet.rotatedMarker.js"></script> 
<script src="Geolocate.js"></script>
	  
</div>
  
</body>

</html>





