<!DOCTYPE html>
<html lang="fi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ratakilometri kartta</title>
    <link rel="icon" href="Logo.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js"></script>
</head>

<body>
<!-- Salasanan syöttömodaali -->
<div id="passwordModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h1 style="font-family: calibri;">Anna salasana päästäksesi sivulle</h1>
		<input type="password" id="passwordInput">
        <button id="passwordButton" style="font-family: calibri;" onclick="verifyPassword()">Tarkista salasana</button>
    </div>
</div>

<div id="map"></div>
	
<div id="protected-content" style="display:none">
	<button id="removeMarkersButton" style="display:none">Poista merkit kartalta</button>
	
	<div id="menuContainer">
		<button id="menuButton">
			<img src="funnel.svg" alt="Suodatin" style="width: 25px; height: 25px;">
		</button>
		<div id="menuContent" style="display: none; font-family: calibri;">
			<label><input type="checkbox" id="tunnelitCheckbox"> Näytä tunnelit</label><br>
			<label><input type="checkbox" id="sillatCheckbox"> Näytä sillat</label><br>
			<label><input type="checkbox" id="tasoristeyksetCheckbox"> Näytä tasoristeykset</label><br>
			<label><input type="checkbox" id="tilirataosatCheckbox"> Näytä tilirataosat</label><br>
			<label><input type="checkbox" id="kilometrimerkitCheckbox" checked> Näytä kilometrimerkit</label><br>
			<label><input type="checkbox" id="kayttokeskusalueetCheckbox"> Näytä käyttökeskusalueet</label><br>
			<label><input type="checkbox" id="ToimialueetCheckbox"> Näytä toimialueet</label><br>
			<label><input type="checkbox" id="JunatCheckbox"> Näytä junat kartalla</label>
		</div>
	</div>

	<span>
	<button id="toggleView">
	<img src="maa.png" alt="Maapallo" style="
		width: auto;
		height: -webkit-fill-available;
	">
	</button>
	</span>

		<span>
		<button id="locateUser" class="locate-button">
		<img src="locate.png" alt="tähtäin" style="
			width: auto;
			height: -webkit-fill-available;
		">
		</button>
		</span>
		
<div class="searchContainer">
	<div id="loadData" style="position: absolute; background-color: white; font-family: calibri; height: -webkit-fill-available;width: -webkit-fill-available; text-align: center;padding: 10px;color: #ccc;">Ladataan dataa</div>
		<div class="searchBox">
			<input type="text" id="searchInput" placeholder="Syötä ratakm...">
			<button id="searchButton" type="button">
				<span class="magnifier"><img src="magnifier.svg" style="width: 20px;height: 20px;"></span>
				<span class="close-icon" style="display: none;">&#x2715;</span>
			</button>
		</div>
	<div id="loading" style="display: none; background-color: white; padding: 0px 0px 5px 15px; font-family: calibri; font-weight: bold;">Ladataan...</div>
	<div id="virhe" style="display: none; color: red; background-color: white; padding: 0px 0px 5px 15px; font-family: calibri; font-weight: bold;"></div>
		<div class="resultbox">
			<button type="button" class="collapsible"></button>
			<div class="content">
				<div class="results" id="results"></div>
			</div>
		</div>
		
	</div>
</div>
	
<script>
document.addEventListener("DOMContentLoaded", function() {
    var coll = document.getElementsByClassName("collapsible");
    var resultsDiv = document.getElementById("results");
	resultsDiv.style.display = "none";

    function toggleCollapsibleVisibility() {
        // Tarkistetaan, onko results-div näkyvissä
        var isResultsVisible = resultsDiv.style.display !== "none";

        // Asetetaan collapsible-elementtien näkyvyys results-divin näkyvyyden mukaan
        for (var i = 0; i < coll.length; i++) {
            coll[i].style.display = isResultsVisible ? "block" : "none";
        }
    }

    for (var i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "none") {
                content.style.display = "block";
            } else {
                content.style.display = "none";
            }
        });
    }

    // Asetetaan alustava näkyvyys
    toggleCollapsibleVisibility();

    // Tarkistetaan ja asetetaan näkyvyys aina kun results-divin tila muuttuu
    var observer = new MutationObserver(toggleCollapsibleVisibility);
    observer.observe(resultsDiv, { attributes: true, childList: true, subtree: true });
});
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.7.5/proj4.js"></script>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="Script.js"></script>
<script src="mapsetup.js"></script>
<script src="layers.js"></script>
<script src="Geolocate.js"></script>
 
</body>

</html>




